/*!
 * viewport-units-buggyfill v0.6.0
 * @web: https://github.com/rodneyrehm/viewport-units-buggyfill/
 * @author: Rodney Rehm - http://rodneyrehm.de/en/
 */
!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.viewportUnitsBuggyfill=t()}(this,function(){"use strict";function e(e,t){var n;return function(){var i=this,r=arguments,o=function(){e.apply(i,r)};clearTimeout(n),n=setTimeout(o,t)}}function t(){try{return window.self!==window.top}catch(e){return!0}}function n(n){if(!v){if(!0===n&&(n={force:!0}),m=n||{},m.isMobileSafari=A,m.isBadStockAndroid=M,!m.ignoreVmax||m.force||R||(T=!1),R||!m.force&&!A&&!T&&!M&&!C&&(!m.hacks||!m.hacks.required(m)))return window.console&&R&&console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below"),{init:function(){}};window.dispatchEvent(new S("viewport-units-buggyfill-init")),m.hacks&&m.hacks.initialize(m),v=!0,k=document.createElement("style"),k.id="patched-viewport",document.head.appendChild(k),f(function(){var n=e(r,m.refreshDebounceWait||100);window.addEventListener("orientationchange",n,!0),window.addEventListener("pageshow",n,!0),(m.force||T||t())&&(window.addEventListener("resize",n,!0),m._listeningToResize=!0),m.hacks&&m.hacks.initializeEvents(m,r,n),r()})}}function i(){k.textContent=u(),k.parentNode.appendChild(k),window.dispatchEvent(new S("viewport-units-buggyfill-style"))}function r(){v&&(a(),setTimeout(function(){i()},1))}function o(e){try{if(!e.cssRules)return}catch(e){if("SecurityError"!==e.name)throw e;return}for(var t=[],n=0;n<e.cssRules.length;n++){var i=e.cssRules[n];t.push(i)}return t}function a(){return x=[],b.call(document.styleSheets,function(e){var t=o(e);t&&"patched-viewport"!==e.ownerNode.id&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(e.media&&e.media.mediaText&&window.matchMedia&&!window.matchMedia(e.media.mediaText).matches||b.call(t,s))}),x}function s(e){if(7===e.type){var t;try{t=e.cssText}catch(e){return}return y.lastIndex=0,void(y.test(t)&&(x.push([e,null,t]),m.hacks&&m.hacks.findDeclarations(x,e,null,t)))}if(!e.style){if(!e.cssRules)return;return void b.call(e.cssRules,function(e){s(e)})}b.call(e.style,function(t){var n=e.style.getPropertyValue(t);e.style.getPropertyPriority(t)&&(n+=" !important"),y.lastIndex=0,y.test(n)&&(x.push([e,t,n]),m.hacks&&m.hacks.findDeclarations(x,e,t,n))})}function u(){E=l();var e=[],t=[],n,i;return x.forEach(function(r){var o=c.apply(null,r),a=o.selector.length?o.selector.join(" {\n")+" {\n":"",s=new Array(o.selector.length+1).join("\n}");if(!a||a!==n)return t.length&&(e.push(n+t.join("\n")+i),t.length=0),void(a?(n=a,i=s,t.push(o.content)):(e.push(o.content),n=null,i=null));a&&!n&&(n=a,i=s),t.push(o.content)}),t.length&&e.push(n+t.join("\n")+i),C&&e.push("* { content: normal !important; }"),e.join("\n\n")}function c(e,t,n){var i,r=[];i=n.replace(y,d),m.hacks&&(i=m.hacks.overwriteDeclaration(e,t,i)),t&&(r.push(e.selectorText),i=t+": "+i+";");for(var o=e.parentRule;o;)r.unshift("@media "+o.media.mediaText),o=o.parentRule;return{selector:r,content:i}}function d(e,t,n){var i=E[n];return parseFloat(t)/100*i+"px"}function l(){var e=window.innerHeight,t=window.innerWidth;return{vh:e,vw:t,vmax:Math.max(t,e),vmin:Math.min(t,e)}}function f(e){var t=0,n=function(){--t||e()};b.call(document.styleSheets,function(e){e.href&&h(e.href)!==h(location.href)&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(t++,p(e.ownerNode,n))}),t||e()}function h(e){return e.slice(0,e.indexOf("index.html",e.indexOf("://")+3))}function p(e,t){w(e.href,function(){var n=document.createElement("style");n.media=e.media,n.setAttribute("data-href",e.href),n.textContent=this.responseText,e.parentNode.replaceChild(n,e),t()},t)}function w(e,t,n){var i=new XMLHttpRequest;if("withCredentials"in i)i.open("get.html",e,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");i=new XDomainRequest,i.open("get.html",e)}return i.onload=t,i.onerror=n,i.send(),i}var v=!1,m,g=window.navigator.userAgent,y=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,b=[].forEach,E,x,k,T=/MSIE [0-9]\./i.test(g),R=/MSIE [0-8]\./i.test(g),C=g.indexOf("Opera Mini")>-1,A=/(iPhone|iPod|iPad).+AppleWebKit/i.test(g)&&function(){var e=g.match(/OS (\d)/);return e&&e.length>1&&parseInt(e[1])<10}(),M=function(){return g.indexOf(" Android ")>-1&&(g.indexOf("Version/index.html")>-1&&parseFloat((g.match("Android ([0-9.]+)")||[])[1])<=4.4)}();T||(T=!!navigator.userAgent.match(/Trident.*rv[ :]*1[01]\.| Edge\/1\d\./));try{new S("test")}catch(e){var S=function(e,t){var n;return t=t||{bubbles:!1,cancelable:!1,detail:undefined},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};S.prototype=window.Event.prototype,window.CustomEvent=S}return{version:"0.6.0",findProperties:a,getCss:u,init:n,refresh:r}});