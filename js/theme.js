!function(){window.app={$:{page:$("html, body"),video:$(".video"),masonryContainer:$(".masonry"),itemLink:$(".item-link"),videoEmbed:$("#video-player"),controlPrevious:$(".control-previous"),controlNext:$(".control-next"),assetCaption:$(".asset-caption")},skrollrInstance:null,viewports:{small:414,medium:768,large:1024},shouldScrollToHero:!1,shouldShowNav:!0,mobileMenuScrollThrottle:10,currentIndex:0,fitvid:function(){$(".asset-primary").fitVids()},pageTypes:{gallery:function(){app._isMobileDevice()||app._coverImageExists()&&(app.skrollrInstance=skrollr.init({forceHeight:!1})),$(".asset-primary").on("click",function(){$(this).hasClass("image")&&app.$.controlNext.trigger("click")}),app.fitvid(),app.itemLinkPresenter(),app.setItemForCurrentHash(),app.setVideoImageRatio(),$(document).on("lazybeforeunveil",function(e){$(e.target).on("load",function(){$(e.target).hasClass("image-holder-image")?$(this).parents(".image-holder").addClass("image-loaded"):$(this).parents(".image-wrap").addClass("image-loaded")})}),app.setHeaderOffset(),setTimeout(function(){$(".outer-container").addClass("visible"),app.masonry()},1),window.onhashchange=function(){app.getItemFromHash()}},listing:function(){!app._isMobileDevice()&&_4ORMAT_DATA.page.title&&(app.skrollrInstance=skrollr.init({forceHeight:!1}));var e=$(".main-header"),a=$(".main-lower"),t=e.outerHeight();$(document).on("lazybeforeunveil",function(e){$(e.target).on("load",function(){$(this).parents(".image-wrap").addClass("image-loaded")})}),e.css({position:"fixed",top:0,width:"100%"}),a.css("margin-top",t+"px"),app.setHeaderOffset(),"Masonry"===_4ORMAT_DATA.theme.listing_thumbnail_style?setTimeout(function(){$(".outer-container").addClass("visible"),app.masonry()},1):setTimeout(function(){$(".outer-container").addClass("visible")},1)},content:function(){$("._4ORMAT_content_page_TITLE").length||app.setContentPageTopOffset()},blog:function(){app.setContentPageTopOffset(),$(".f_blog_post").fitVids()},client:function(){app.setContentPageTopOffset()}},masonry:function(){$(".masonry").length&&(waterfall(".masonry"),imgStatus.watch(".masonry-item img",function(){waterfall(".masonry")}))},getItemFromHash:function(){var e=parseInt(window.location.hash.slice(1)),a=app.$.itemLink.eq(e),t=a.parent().index();switch(app.currentIndex=t,a.parent().data("asset-type")){case"video":app.presentVideo(a,t);break;case"image":app.presentImage(a,t);break;case"text":app.presentText(a,t)}app.shouldScrollToHero=!0},itemLinkPresenter:function(){app.$.itemLink.on("click",function(e){e.preventDefault();var a=$(this).parent().index();switch(app.currentIndex=a,$(this).parent().data("asset-type")){case"video":app.presentVideo(e.currentTarget,a);break;case"image":app.presentImage(e.currentTarget,a);break;case"text":app.presentText(e.currentTarget,a)}app._setLocationHash(a),app.shouldScrollToHero=!0})},presentImage:function(e,a){var t=_4ORMAT_DATA.page.assets[a];if("Masonry"==_4ORMAT_DATA.theme.gallery_thumbnail_style)var i=$(e).find("img").first().attr("data-srcset");else var i=$(e).find("img").first().attr("data-link-srcset");$(".main-header .asset .text-asset").empty(),app.$.videoEmbed.attr("src",""),$(".image-holder .image-placeholder").attr({width:t.image_dimensions_2500x0[0],height:t.image_dimensions_2500x0[1]}).css("background-color",t.dominant_color),setTimeout(function(){app.shouldScrollToHero&&(window.matchMedia("(orientation: landscape)").matches&&app._isMobileDevice()&&(app.shouldShowNav=!1),app.scrollToHero(".image-holder .image-placeholder"))},0),$(".asset-primary").removeClass("video text").addClass("image").css("max-width",""),$(".image-holder").removeClass("image-loaded"),$(".image-holder-image").attr({"data-srcset":i,"data-src":i}).parent(".image-holder").removeClass("hidden"),t.copy?($(".main-header .asset").removeClass("no-caption"),$(".main-header .asset .asset-caption").empty().html(t.copy)):$(".main-header .asset").addClass("no-caption")},presentVideo:function(e,a){var t=_4ORMAT_DATA.page.assets[a],i=$(e).data("video-url"),n={width:$(e).data("video-width"),height:$(e).data("video-height")},o=n.height/n.width*100+"%";$(".main-header .asset .text-asset").empty(),_4ORMAT_DATA.theme.upscale_videos?$(".asset-primary").removeClass("image text").addClass("video"):$(".asset-primary").removeClass("image text").addClass("video").css("max-width",t.video_width),app.$.videoEmbed.attr("src",i).attr("width",n.width).attr("height",n.height).addClass("active"),$(".asset-primary .fluid-width-video-wrapper").css("paddingTop",o),t.copy?($(".main-header .asset").removeClass("no-caption"),$(".main-header .asset .asset-caption").empty().html(t.copy)):$(".main-header .asset").addClass("no-caption"),this.fitvid(),window.matchMedia("(orientation: landscape)").matches&&app._isMobileDevice()&&(app.shouldShowNav=!1),app.scrollToHero("#video-player")},presentText:function(e){app.$.videoEmbed.attr("src",""),$(".main-header .asset").addClass("no-caption"),$(".asset-primary").removeClass("video image").addClass("text").css("max-width",""),$(".main-header .asset .text-asset").empty().html($(e).data("caption")),window.matchMedia("(orientation: landscape)").matches&&app._isMobileDevice()&&(app.shouldShowNav=!1),app.$.page.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){app.$.page.stop()}),app.$.page.animate({scrollTop:$(".text-asset").offset().top-$(".pinned-header").outerHeight()-20},500,function(){app.$.page.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove"),app.shouldShowNav=!0})},setItemForCurrentHash:function(){if(""!==window.location.hash){var e=parseInt(window.location.hash.slice(1));app.$.itemLink.eq(e).length&&app.$.itemLink.eq(e).trigger("click")}},setVideoImageRatio:function(){"Square"!==_4ORMAT_DATA.theme.gallery_thumbnail_style&&"Landscape"!==_4ORMAT_DATA.theme.gallery_thumbnail_style||$(".gallery-item.video").each(function(){var e=$(this).width();"Square"===_4ORMAT_DATA.theme.gallery_thumbnail_style?$(this).find(".video-thumb-container").height(e):"Landscape"===_4ORMAT_DATA.theme.gallery_thumbnail_style&&$(this).find(".video-thumb-container").height(e/1.48)})},lazynav:function(){app.$.controlNext.on("click",function(e){e.preventDefault();var a=app.currentIndex;a=(app.currentIndex+1)%app.$.itemLink.length,a>app.$.itemLink.length-1&&(a=0),$(".gallery-item").eq(a).children(".item-link").trigger("click")}),app.$.controlPrevious.on("click",function(e){e.preventDefault();var a=app.currentIndex;a=(app.currentIndex-1)%app.$.itemLink.length,a<0&&(a=app.$.itemLink.length-1),$(".gallery-item").eq(a).children(".item-link").trigger("click")})},setDropdownHeight:function(){if(!app._isMobileDevice()){var e=$(window).height();$(".category-dropdown-wrapper").each(function(){var a=$(this).find(".category-dropdown"),t=a.height(),i=a.offset().top;t>i+e&&$(this).height(e-i)})}},toggleOverlayMenu:function(){$(".menu-trigger").on("click",function(){$(this).hasClass("menu-active")?app.hideOverlayMenu():app.showOverlayMenu()})},showOverlayMenu:function(){$(".menu-trigger").addClass("menu-active"),$("html, body").addClass("disable-scroll mobile-menu-opened"),$(".overlayed-menu").removeClass("hidden").scrollTop(0)},hideOverlayMenu:function(){$(".menu-trigger").removeClass("menu-active"),$("html, body").removeClass("disable-scroll mobile-menu-opened"),$(".overlayed-menu").addClass("hidden")},scrollToHero:function(e){app.$.page.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){app.$.page.stop()}),app.$.page.animate({scrollTop:app._getHeroVerticalCenter(e)},500,function(){app.$.page.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove"),app.shouldShowNav=!0})},setHeaderOffset:function(){var e="gallery"===_4ORMAT_DATA.page.type?$(".main-header-title"):$(".main-header"),a="gallery"===_4ORMAT_DATA.page.type?$(".main-header-short"):$(".main-lower"),t=$(".pinned-header").outerHeight(),i=null;e.css({position:"fixed",top:0,width:"100%",paddingTop:t}),setTimeout(function(){"listing"!==_4ORMAT_DATA.page.type&&(app._coverImageExists()&&_4ORMAT_DATA.theme.gallery_use_fullwidth_cover_image||_4ORMAT_DATA.page.title)?(i=e.outerHeight(),a.css("margin-top",i)):a.css("padding-top",$(".pinned-header").outerHeight()+20)},0),app._isIE11()&&setTimeout(function(){$(".title-element").css({top:e.height()/2-$(".title-element").outerHeight()/2})},1)},setContentPageTopOffset:function(){var e=$(".pinned-header").outerHeight()+20;$("body").css("padding-top",e),setTimeout(function(){$("._4ORMAT_content_wrapper").addClass("content-loaded")},1)},bindKeyEvents:function(){$(document).on("keyup",function(e){switch(e.keyCode){case 27:app.hideOverlayMenu();break;case 39:"gallery"===_4ORMAT_DATA.page.type&&app.$.controlNext.trigger("click");break;case 37:"gallery"===_4ORMAT_DATA.page.type&&app.$.controlPrevious.trigger("click")}})},showNav:function(){$(".pinned-header").removeClass("hidden")},hideNav:function(){$(".pinned-header").addClass("hidden")},toggleNav:function(){$(".pinned-header").toggleClass("hidden")},bindScrollDelta:function(){$(window).on("scrolldelta",function(e){if($(window).width()<=app.viewports.large&&$(".overlayed-menu").hasClass("hidden")){var a=e.scrollTopDelta;a>1&&a>=app.mobileMenuScrollThrottle&&e.scrollTop>0?app.hideNav():a<1&&a<=-1*app.mobileMenuScrollThrottle&&app.shouldShowNav&&app.showNav(),0===e.scrollTop&&app.shouldShowNav&&app.showNav()}})},bindResizeEvent:function(){$(window).on("resize",function(){app._isIE11()&&viewportUnitsBuggyfill.refresh(),$(".masonry").length&&waterfall(".masonry"),~["gallery"].indexOf(_4ORMAT_DATA.page.type)&&app.setVideoImageRatio(),~["gallery","listing"].indexOf(_4ORMAT_DATA.page.type)&&app.setHeaderOffset(),~["content","blog","client"].indexOf(_4ORMAT_DATA.page.type)&&app.setContentPageTopOffset(),$(window).width()>=app.viewports.medium&&(_4ORMAT_DATA.theme.menu_trigger||app.hideOverlayMenu(),$(".pinned-header").hasClass("hidden")&&$(".pinned-header").removeClass("hidden")),app.setDropdownHeight()})},bindSwipeEvents:function(){$(".assets").on("swiped-left",function(){app.$.controlNext.trigger("click")}),$(".assets").on("swiped-right",function(){app.$.controlPrevious.trigger("click")})},init:function(){this.toggleOverlayMenu(),this.lazynav(),this.setDropdownHeight(),this.bindScrollDelta(),this.bindResizeEvent(),window.matchMedia("(orientation: landscape)").matches&&app._isMobileDevice()&&app.hideNav(),this.pageTypes.hasOwnProperty(_4ORMAT_DATA.page.type)?this.pageTypes[_4ORMAT_DATA.page.type]():this.pageTypes.content(),(app._isTouchDevice()||app._isTablet()&&"gallery"===_4ORMAT_DATA.page.type)&&app.bindSwipeEvents()},_animationCascade:function(e){"forward"!==e&&$("._4ORMAT_content_wrapper").removeClass("content-loaded"),$(".page-asset").each(function(a){var t=$(this);setTimeout(function(){"forward"===e?t.addClass("asset-loaded"):"backwards"===e&&t.removeClass("asset-loaded")},100*a)})},_getHeroVerticalCenter:function(e){var a=$(e);return a.offset().top-Math.ceil((-a.outerHeight()+$(window).height())/2)},_setLocationHash:function(e){history.pushState(null,null,"#"+e)},_isMobileDevice:function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera)},_isTablet:function(){return window.matchMedia("(max-width:1024px)").matches},_isTouchDevice:function(){return"ontouchend"in document},_isIE11:function(){return!(!navigator.userAgent.match(/Trident/)||!navigator.userAgent.match(/rv[ :]11/))},_isInIframe:function(){return null!==window.frameElement},_coverImageExists:function(){return _4ORMAT_DATA.page.cover_image||_4ORMAT_DATA.page.title}},$(window).load(function(){app._animationCascade("forward"),app.skrollrInstance&&!app._isMobileDevice()&&app._coverImageExists()&&app.skrollrInstance.refresh(),setTimeout(function(){app.setHeaderOffset(),app._isInIframe()&&($("body").css("overflow-y","hidden"),setTimeout(function(){$("body").css("overflow-y","scroll")},1))},1)}),$(document).on("page:load",function(){app._animationCascade("forward"),setTimeout(function(){app.setHeaderOffset()},1)}),$(document).on("page:before-change",function(){return app.hideOverlayMenu(),$("body").addClass("lock-click"),$(".outer-container").removeClass("visible"),app._animationCascade("backwards"),$("html,body").animate({scrollTop:0},200)}),$(document).on("page:restore page:receive",function(){app._animationCascade("forward"),$("body").removeClass("lock-click")}),app.init(),app._isIE11()&&$("body").addClass("ie11")}(),$(document).on("DOMContentLoaded",function(){app.bindKeyEvents()});